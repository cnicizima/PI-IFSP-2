<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Destinos</title>
    <!-- link Fivicon -->
    <link rel="icon" href="img/img_favicon/logo_branca16x16.png" type="image/png">

    <!-- link reset -->
    <link rel="stylesheet" href="css/reset.css" />

    <!-- links css -->
    <link rel="stylesheet" href="css/style_destinos.css" />
    <link rel="stylesheet" href="css/modal-cadastro.css">

     <!-- import montserrat -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  
    </head>
  <body>
    <div class="container_principal">

        <!-- header -->
        <header class="header">
          <div class="container_imagem_logo">
              <img src="img/img_index/logo_azul.png" class="imagem_logo" alt="logo">
              <h1 class="logo">Azure</h1>
          </div>
          <nav>
              <ul class="lista_nav">
                  <li><a href="index.html" class="links_nav">HOME</a></li>
                  <li><a href="destinos.html" class="links_nav">DESTINOS</a></li>
                  <li><a href="sobre_nos.html" class="links_nav">SOBRE NÓS</a></li>
                  <li><a href="contato.html" class="links_nav">CONTATO</a></li>
                  <li><a href="#" class="links_nav" onclick="openModal('modal_cadastro')">ACESSAR</a></li>
                  <li><a href="carrinho.html"><i class="fa-solid fa-cart-shopping fa-xl" style="color: #496c7b;"></i></a></li>
              </ul>
          </nav>
      </header>

           <!-- modal de login e cadastro -->

      <dialog id="modal_cadastro">
        <div
          class="container_modal_cadastro"
          onclick="event.stopPropagation();"
        >
          <div class="xizzinho">
            <img
              src="img/img_index/logo_branca.png"
              class="cadastro_logo_img"
            />
            <button
              class="btn_fechar_modal"
              onclick="closeModal('modal_cadastro')"
            >
              <i class="fa-solid fa-xmark fa-2xl" style="color: #eef2f6"></i>
            </button>
          </div>
          <h4>Comece aqui!</h4>
          <h1>Crie <b>sua conta</b></h1>

          <input
            type="text"
            class="input"
            name="cadastro_nome"
            id="cadastro_nome"
            placeholder="Digite seu nome completo..."
            required
          />

          <input
            type="text"
            class="input"
            id="cpf"
            name="cpf"
            placeholder="Digite seu CPF..."
            required
            pattern="\d{3}\.\d{3}\.\d{3}-\d{2}"
          />

          <input
            type="date"
            class="input"
            id="nascimento"
            name="nascimento"
            required
          />

          <select name="sexo" id="sexo">
            <option value="">Selecione seu sexo...</option>
            <option value="F">Feminino</option>
            <option value="M">Masculino</option>
            <option value="">Prefiro não informar</option>
          </select>

          <select id="estado" name="Selecione seu estado...">
            <option value="">Selecione seu estado...</option>
            <option value="AC">Acre</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amapá</option>
            <option value="AM">Amazonas</option>
            <option value="BA">Bahia</option>
            <option value="CE">Ceará</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Espírito Santo</option>
            <option value="GO">Goiás</option>
            <option value="MA">Maranhão</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option>
            <option value="MG">Minas Gerais</option>
            <option value="PA">Pará</option>
            <option value="PB">Paraíba</option>
            <option value="PR">Paraná</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piauí</option>
            <option value="RJ">Rio de Janeiro</option>
            <option value="RN">Rio Grande do Norte</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rondônia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option>
            <option value="SP">São Paulo</option>
            <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option>
            <option value="EX">Estrangeiro</option>
          </select>

          <input
            type="text"
            class="input"
            id="celular"
            name="celular"
            placeholder="Digite seu celular..."
            required
            pattern="\(\d{2}\) \d{5}-\d{4}"
          />

          <input
            type="email"
            class="input"
            name="cadastro_email"
            id="cadastro_email"
            placeholder="Digite seu email..."
            required
          />

          <input
            type="password"
            class="input"
            name="cadastro_senha"
            id="cadastro_senha"
            placeholder="Digite sua senha..."
            required
          />

          <button class="cadastro" id="btnCadastro" onclick="registerUser();">
            Cadastre-se
          </button>
              <h4>
                Já é cadastrado?
                <a
                  href="#"
                  class="entre"
                  onclick="closeModal('modal_cadastro'); openModal('modal_login');"
                  >Entre aqui</a
                >
              </h4>
            </div>
          </dialog>
    
          <dialog id="modal_login">
            <div class="container_modal_login" onclick="event.stopPropagation();">
              <div class="xizzinho">
                <img src="img/img_index/logo_branca.png" class="login_logo_img" />
                <button
                  class="btn_fechar_modal"
                  onclick="closeModal('modal_login')"
                >
                  <i class="fa-solid fa-xmark fa-2xl" style="color: #eef2f6"></i>
                </button>
              </div>
              <h4>Seu bilhete para Mônaco está aqui</h4>
              <h1>Acesse <b>sua conta</b></h1>
              <input
                type="email"
                class="input"
                name="login_email"
                id="login_email"
                placeholder="Digite seu email..."
                required
              /><br />
              <input
                type="password"
                class="input"
                name="login_senha"
                id="login_senha"
                placeholder="Digite sua senha..."
                required
              /><br />
              <button class="login" id="btnLogin" onclick="loginUser();">
                Entrar
              </button>
              <h4>
                <a href="#" class="entre">Esqueceu a senha?</a> <br />
                <a
                  href="#"
                  class="entre"
                  onclick="closeModal('modal_login'); openModal('modal_cadastro');"
                  >Crie sua conta</a
                >
              </h4>
            </div>
          </dialog>
    
          <button onclick="openModal('modal_cadastro')">Abrir Cadastro</button>
          <button onclick="openModal('modal_login')">Abrir Login</button>
    
    
          <!-- Script para funcionar o modal -->
          <script>
            // Função para registrar o usuário
            async function registerUser() {
              const nome = document.getElementById("cadastro_nome").value;
              const email = document.getElementById("cadastro_email").value;
              const senha = document.getElementById("cadastro_senha").value;
    
              if (!nome || !email || !senha) {
                alert("Preencha todos os campos!");
                return;
              }
    
              try {
                const response = await fetch(
                  "http://localhost:4000/users/register",
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                      nome,
                      email,
                      senha,
                    }),
                  }
                );
    
                const data = await response.json();
                if (response.ok) {
                  alert("Cadastro bem-sucedido!");
                  closeModal("modal_cadastro");
                  openModal("modal_login");
                } else {
                  alert(data.message);
                }
              } catch (error) {
                console.error("Erro ao cadastrar o usuário:", error);
                alert("Erro ao cadastrar o usuário.");
              }
            }
    
            // Função para fazer o login do usuário
            async function loginUser() {
              const email = document.getElementById("login_email").value;
              const senha = document.getElementById("login_senha").value;
    
              if (!email || !senha) {
                alert("Preencha todos os campos!");
                return;
              }
    
              try {
                // Envia os dados para o back-end via POST
                const response = await fetch("http://localhost:4000/users/login", {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                  },
                  body: JSON.stringify({
                    email: email, // E-mail
                    senha: senha, // Senha
                  }),
                });
    
                const data = await response.json();
    
                if (response.ok) {
                //   alert(data.message); // Exibe a mensagem do servidor
    
                  // Usa setTimeout para garantir que o alert seja fechado antes do redirecionamento
                  setTimeout(() => {
                    window.location.href = data.redirectTo; // Redireciona para a página correta
                  }, 500); // Espera 500ms (meio segundo) antes de redirecionar
                } else {
                  alert(data.message); // Exibe a mensagem de erro
                }
              } catch (error) {
                console.error("Erro ao enviar dados de login:", error);
                alert("Erro ao realizar login. Tente novamente mais tarde.");
              }
            }
    
            // Adiciona o event listener para o botão de login
            document
              .getElementById("btnLogin")
              .addEventListener("click", loginUser);
    
            // Função para abrir o modal
            function openModal(id) {
              document.getElementById(id).showModal();
            }
    
            // Função para fechar o modal
            function closeModal(id) {
              document.getElementById(id).close();
            }
          </script>


        <div class="carousel-container">
          <div class="carousel-slides">
            <div class="carousel-slide"><img src="img/img_destinos/monaco-pictures-3qho33d801fw91zo.jpg" alt="Imagem 1"></div>
            <div class="carousel-slide"><img src="img/img_destinos/pexels-vincent-gerbouin-445991-2231299.jpg" alt="Imagem 3"></div>
            <div class="carousel-slide"><img src="img/img_destinos/pexels-mike-kit-590388141-17346695.jpg" alt="Imagem 4"></div>
            <div class="carousel-slide"><img src="img/img_destinos/pexels-castorlystock-3836520.jpg" alt="Imagem 5"></div>
            <div class="carousel-slide"><img src="img/img_destinos/pexels-bingqian-li-230971044-20841489.jpg" alt="Imagem 6"></div>
          </div>
        
          <div class="carousel-nav">
            <button onclick="prevSlide()">&#10094;</button>
            <button onclick="nextSlide()">&#10095;</button>
          </div>
        
          <div class="carousel-indicators">
            <button onclick="goToSlide(0)" class="active"></button>
            <button onclick="goToSlide(1)"></button>
            <button onclick="goToSlide(2)"></button>
            <button onclick="goToSlide(3)"></button>
            <button onclick="goToSlide(4)"></button>
          </div>
        </div>

        <div class="container">

          <div class="card-container" id="card-container">
            <!-- Os cards serão inseridos aqui via JavaScript -->
          </div>

          
          <!-- <div class="card-container">
            <div class="card">
              <img src="benidorm.jpg" alt="Benidorm, Spain">
              <div class="card-content">
                <h3>Benidorm, Spain</h3>
                <p class="reviews">⭐⭐⭐⭐ <span>4 customer reviews</span></p>
                <p>Benidorm is a buzzing resort with a big reputation for beach holidays. Situated in sunny Costa Blanca, the town is one of the original Spanish beach resorts...</p>
                <button>Buy This Tour</button>
                <div class="price-tag">$790</div>
              </div>
            </div>
            <div class="card">
              <img src="mauritius.jpg" alt="Mauritius Island, Africa">
              <div class="card-content">
                <h3>Mauritius Island, Africa</h3>
                <p class="reviews">⭐⭐⭐⭐⭐ <span>5 customer reviews</span></p>
                <p>The beautiful and inviting island nation of Mauritius is an ideal 'flop and drop' at the conclusion of your safari. Indulge in the delightful scents of the fragrant...</p>
                <button>Buy This Tour</button>
                <div class="price-tag">$890</div>
              </div>
            </div>
          </div> -->
        </div>

        <!-- Newsletter -->

        <div class="newsletter_container">
          <div class="news_imagem1"><img src="img/img_index/news1.png" class="imagem_newsletter"></div>
          <div class="news_imagem2"><img src="img/img_index/news2.png" class="imagem_newsletter"></div>
          <div class="news_imagem3"><img src="img/img_index/news3.png" class="imagem_newsletter"></div>
          <h1 class="news_titulo">Assine nossa newsletter e receba nossas ofertas!</h1>
          <h3 class="news_paragrafo">e ganhe 20% de desconto em sua primeira compra</h3>
          <div class="news_email">
               <i class="fa-regular fa-envelope envelope" style="color: white; margin-left: 20px;"></i>
             <input type="email" class="email_campo" placeholder="Insira seu e-mail..."> <button type="button" class="email_botao"> <b>Inscreva-se</b></button> 
          </div>
          <h3 class="news_privacidade">Leia nossa política de privacidade <a href="#" class="link_aqui">aqui</a></h3>
      </div>

      <!-- Footer -->

      <div class="footer">

          <div class="footer_logo_div">
              <img src="img/img_index/logo_azul.png" class="logo_titulo_img">
              <h1 class="logo_titulo_texto">Azure</h1>
          </div>

          <div class="logo_texto">
              <p>Transforme seus sonhos em destinos inesquecíveis conosco, onde cada jornada é uma experiência única!</p>
          </div>

          <div class="logo_contato_texto">
              <h1>Contatos</h1>
          </div>

          <div class="campos_contato1">
              <i class="fa-solid fa-location-dot contato_font_awesome"></i>
              <p>Av. Bahia, 1739 - Indaiá, Caraguatatuba - SP.</p>
          </div>

          <div class="campos_contato2">
              <i class="fa-solid fa-phone contato_font_awesome"></i>
              <p>(12) 3885-2130</p>
          </div>

          <div class="campos_contato3">
              <i class="fa-solid fa-envelope contato_font_awesome"></i>
              <p>azure@gmail.com</p>
          </div>
      </div>
      
      <h3 class="copyright">@Copyright by Azure 2024 - Todos os direitos reservados. </h3>
    </div>

    <!-- js para os icones fontawesoma -->
    <script src="https://kit.fontawesome.com/b7057748ce.js" crossorigin="anonymous"></script>
    <script src="js/destinos.js"></script>
    <script src="js/script.js"></script>

  </body>
</html>
